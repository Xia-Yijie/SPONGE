name: build SPONGE on Windows 
on:
  push

jobs:
  build:
    runs-on: windows-latest
    name: build
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Install Cuda
        uses: Jimver/cuda-toolkit@v0.2.8
        with:
          cuda: 11.7.0
      - name: Install Visual Studio shell
        uses: egor-tensin/vs-shell@v2
      - name: Build
        run:  |
          cd SPONGE
          ./vs_project_generator.bat 11.7 v143
          devenv SPONGE.sln /BUILD
          devenv SPONGE_NOPBC.sln /BUILD
          devenv SPONGE_FEP.sln /BUILD
          devenv SPONGE_TI.sln /BUILD
      - name: Upload
        uses: actions/upload-artifact@v1
        with:
          name: SPONGE
          path: x64\Release\*.exe
